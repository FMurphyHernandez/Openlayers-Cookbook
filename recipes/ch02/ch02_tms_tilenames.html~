<!-- Map DOM element -->
<div id="ch2_wms_layer" style="width: 100%; height: 100%;"></div>

<!-- The magic comes here -->
<script type="text/javascript">

    // Create the map using the specified DOM element
    var map = new OpenLayers.Map("ch2_wms_layer");    
    
    // Add a WMS layer
    var wms = new OpenLayers.Layer.WMS("Basic", "http://labs.metacarta.com/wms/vmap0",
    {
        layers: 'basic'
    });
    
    // Add Nexrad WMS layer
    var nexrad = new OpenLayers.Layer.WMS("Nexrad", "http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi",
    {
        layers: "nexrad-n0r",
        transparent: true,
        format: 'image/png'
    },
    {
        isBaseLayer: false
    });
    
    map.addLayers([wms, nexrad]);
    
    // Add layer switcher control
    map.addControl(new OpenLayers.Control.LayerSwitcher());
    // Set the center of the view
    map.setCenter(new OpenLayers.LonLat(-90,40), 4);
    
    
    
    OpenLayers.Layer.Tilenames = OpenLayers.Class(OpenLayers.Layer.TMS, {
 
        getURL: function (bounds) {
            var res = this.map.getResolution();
            var z = this.map.getZoom();
            var limit = Math.pow(2, z);
            var x = Math.round((bounds.left - this.maxExtent.left) / (res * this.tileSize.w));
            var y = Math.round((this.maxExtent.top - bounds.top) / (res * this.tileSize.h));
 
            if (y < 0 || y >= limit)
            {
                return "";
            }
            else
            {
                x = ((x % limit) + limit) % limit;
 
                var tilename = "";
                if( (x+y)%2==0 ) {
                    tilename = "http://chart.apis.google.com/chart?chst=d_text_outline&;chs=256x256&chld=FFFFFF|12|h|000000|b||";
                } else {
                    tilename = "http://chart.apis.google.com/chart?chst=d_text_outline&;chs=256x256&chld=000000|12|h|FFFFFF|b||";
                }
                tilename = tilename + "("+z+"/"+x+"/"+y+")";
                return tilename;
            }
        },
 
        CLASS_NAME: "OpenLayers.Layer.Tilenames"
    });
    
    
</script>
